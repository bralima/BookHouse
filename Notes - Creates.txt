CREATE TABLE CLIENTE (
    IDCliente INT IDENTITY(1,1) PRIMARY KEY,
    Nome VARCHAR(15) NOT NULL,
    Sobrenome VARCHAR(30) NOT NULL,
    Sexo CHAR(2) CHECK (Sexo IN ('M', 'F', 'NB', 'O')),
    Email VARCHAR(30) NOT NULL,
    Telefone BIGINT NOT NULL,
    Senha VARCHAR(50) NOT NULL
);

CREATE TABLE LUGAR (
    IDLugar INT IDENTITY(1,1) PRIMARY KEY,
    Endereco VARCHAR(50) NOT NULL,
    Numero INT NOT NULL,
    Complemento VARCHAR(40),
    Bairro VARCHAR(20) NOT NULL,
    CEP CHAR(8) NOT NULL,
    Pais VARCHAR(15) NOT NULL,
    Estado CHAR(2) NOT NULL,
    Cidade VARCHAR(15) NOT NULL,
    IDCliente INT,
    FOREIGN KEY (IDCliente) REFERENCES CLIENTE(IDCliente) ON DELETE CASCADE
);

CREATE TABLE CARTAO (
    IDCartao INT IDENTITY(1,1) PRIMARY KEY,
    Numero BIGINT NOT NULL,
    Nome VARCHAR(50) NOT NULL,
    Vencimento DATE,
    Seguranca INT NOT NULL,
    IDCliente INT,
    FOREIGN KEY (IDCliente) REFERENCES CLIENTE(IDCliente) ON DELETE CASCADE
);

CREATE TABLE LIVRO (
    IDLivro INT IDENTITY(1,1) PRIMARY KEY,
    Nome VARCHAR(50) NOT NULL,
    Descricao VARCHAR(120) NOT NULL, 
    IMG VARBINARY(MAX),
    Editora VARCHAR(20) NOT NULL,
    Autor VARCHAR(50) NOT NULL,
    Lancamento DATE,
    Preco DECIMAL(10, 2) NOT NULL,
    Genero VARCHAR(20) NOT NULL
);

CREATE TABLE PEDIDO (
    IDPedido INT IDENTITY(1,1) PRIMARY KEY,
    DataCompra DATE DEFAULT GETDATE(),
    IDCliente INT,
    FOREIGN KEY (IDCliente) REFERENCES CLIENTE(IDCliente) ON DELETE CASCADE
);

CREATE TABLE ITEM (
    IDItem INT IDENTITY(1,1) PRIMARY KEY,
    IDPedido INT,
    IDLivro INT,
    Quantidade INT,
    FOREIGN KEY (IDPedido) REFERENCES PEDIDO(IDPedido) ON DELETE CASCADE,
    FOREIGN KEY (IDLivro) REFERENCES LIVRO(IDLivro) ON DELETE CASCADE
);